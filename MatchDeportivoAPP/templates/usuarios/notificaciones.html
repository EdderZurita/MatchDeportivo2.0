{% extends 'base_usuario.html' %}
{% load static %}

{% block title %}Notificaciones{% endblock %}

{% block extra_css %}
<link href="{% static 'css/actividades.css' %}" rel="stylesheet">
{% endblock %}

{% block usuario_content %}
<div class="container">
    <div class="notification-header">
        <h2 class="fw-bold mb-1">Centro de Notificaciones</h2>
        <p>Tienes <strong>{{ notificaciones_sin_leer|length }}</strong> notificaciones sin leer.</p>
    </div>

    {% if notificaciones %}
    {% comment %} Bot√≥n deshabilitado temporalmente - URL no implementada
    <a href="{% url 'marcar_leidas' %}" class="btn btn-outline-secondary mb-3 btn-sm">Marcar todas como le√≠das</a>
    {% endcomment %}

    {% for notificacion in notificaciones %}
    <div class="notification-item {% if not notificacion.leida %}unread{% endif %}">
        <p class="mb-0">
            <!-- Icono basado en el tipo -->
            {% if notificacion.tipo == 'NUEVA_ACTIVIDAD' %}
            <span class="text-primary me-2">üîî</span>
            {% elif notificacion.tipo == 'CONFIRMACION_UNION' %}
            <span class="text-success me-2">‚úÖ</span>
            {% elif notificacion.tipo == 'NUEVA_CALIFICACION' %}
            <span class="text-warning me-2">‚≠ê</span>
            {% endif %}

            {{ notificacion.mensaje }}
        </p>
        <span class="notification-meta">
            Recibida hace {{ notificacion.fecha_creacion|timesince }}
            {% if notificacion.actividad %}
            ‚Äî <a href="{% url 'detalle_actividad' pk=notificacion.actividad.pk %}">Ver actividad</a>
            {% endif %}
        </span>
    </div>
    {% endfor %}
    {% else %}
    <div class="alert alert-success text-center">
        ¬°Todo al d√≠a! No tienes notificaciones pendientes.
    </div>
    {% endif %}
</div>
{% endblock %}