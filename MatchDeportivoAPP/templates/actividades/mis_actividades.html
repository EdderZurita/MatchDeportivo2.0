{% extends 'base_usuario.html' %}
{% load static %}

{% block title %}Mis Actividades | SportConnect{% endblock %}

{% block extra_css %}
<link href="{% static 'css/actividades.css' %}" rel="stylesheet">
{% endblock %}

{% block usuario_content %}
<div class="container">
    <div class="my-activities-header">
        <h2 class="fw-bold mb-1">Mis Actividades</h2>
        <p>Aqu√≠ puedes ver y gestionar las actividades que organizaste o en las que participas.</p>
        <div class="mt-3">
            <a href="{% url 'crear_actividad' %}" class="btn btn-success me-2">Crear nueva actividad</a>
            <a href="{% url 'actividades' %}" class="btn btn-primary">Explorar actividades</a>
        </div>
    </div>

    <h3 class="mt-5 mb-3">üõ†Ô∏è Actividades que organic√© ({{ organizadas|length }})</h3>
    <hr>

    <div class="row">
        {% if organizadas %}
        {% for actividad in organizadas %}
        <div class="col-md-6">
            <div class="activity-card border-start border-3 border-warning">
                <div class="activity-title">{{ actividad.titulo }}</div>
                <div class="activity-info">Deporte: <strong>{{ actividad.deporte|capfirst }}</strong></div>
                <div class="activity-info">
                    Lugar: **{{ actividad.lugar }}** |
                    Fecha: {{ actividad.fecha|date:"D d M" }} |
                    Hora: {{ actividad.hora_inicio|time:"H:i" }}
                </div>
                <div class="activity-info">Cupos restantes: {{ actividad.cupos }} | Inscritos: <strong>{{
                        actividad.participantes.count }}</strong></div>

                <div class="btn-actions">
                    <a href="{% url 'editar_actividad' pk=actividad.pk %}" class="btn btn-warning btn-sm">
                        ‚öôÔ∏è Editar
                    </a>
                    <a href="{% url 'detalle_actividad' pk=actividad.pk %}" class="btn btn-outline-primary btn-sm">
                        Ver detalles
                    </a>
                </div>
            </div>
        </div>
        {% endfor %}
        {% else %}
        <div class="col-12">
            <div class="alert alert-warning">A√∫n no has creado ninguna actividad.</div>
        </div>
        {% endif %}
    </div>

    <h3 class="mt-5 mb-3">üèÖ Actividades en las que participo ({{ participando|length }})</h3>
    <hr>

    <div class="row">
        {% if participando %}
        {% for actividad in participando %}
        <div class="col-md-6">
            <div class="activity-card border-start border-3 border-success">
                <div class="activity-title">{{ actividad.titulo }}</div>
                <div class="activity-info">Organizador: <strong>{{ actividad.organizador.username }}</strong></div>
                <div class="activity-info">
                    Lugar: **{{ actividad.lugar }}** |
                    Fecha: {{ actividad.fecha|date:"D d M" }} |
                    Hora: {{ actividad.hora_inicio|time:"H:i" }}
                </div>

                <div class="btn-actions justify-content-end">
                    <a href="{% url 'detalle_actividad' pk=actividad.pk %}" class="btn btn-success btn-sm me-2">Ver
                        detalles</a>
                    <a href="{% url 'salir_actividad' pk=actividad.pk %}" class="btn btn-outline-danger btn-sm">
                        ‚ùå Cancelar
                    </a>
                </div>
            </div>
        </div>
        {% endfor %}
        {% else %}
        <div class="col-12">
            <div class="alert alert-info">A√∫n no te has unido a ninguna actividad.</div>
        </div>
        {% endif %}
    </div>
</div>
{% endblock %}