{% extends 'base_usuario.html' %}
{% load static %}

{% block title %}Mis Actividades | SportConnect{% endblock %}

{% block extra_css %}
<!-- Estilos externos para actividades -->
<link href="{% static 'css/actividades.css' %}" rel="stylesheet">
{% endblock %}

{% block usuario_content %}
<div class="container">
    <!-- Header azul -->
    <div class="my-activities-header">
        <h2>Mis Actividades</h2>
        <p class="mb-3">Aqu√≠ puedes ver y gestionar las actividades que organizaste o en las que participas.</p>
        <div>
            <a href="{% url 'crear_actividad' %}" class="btn btn-success me-2">Crear nueva actividad</a>
            <a href="{% url 'actividades' %}" class="btn btn-primary">Explorar actividades</a>
        </div>
    </div>

    <!-- Actividades que organic√© -->
    <h3 class="section-title">üõ†Ô∏è Actividades que organic√© ({{ organizadas|length }})</h3>

    {% if organizadas %}
    <div class="row">
        {% for actividad in organizadas %}
        <div class="col-md-6">
            <div class="activity-card border-start border-4 border-warning">
                <div class="activity-title">{{ actividad.titulo }}</div>
                <div class="activity-info">Deporte: <strong>{{ actividad.deporte|capfirst }}</strong></div>
                <div class="activity-info"> Lugar: <strong>{{ actividad.lugar }}</strong> | Fecha: {{ actividad.fecha|date:"D d M" }} | Hora: {{ actividad.hora_inicio|time:"H:i" }}
                </div>
                <div class="activity-info"> Cupos restantes: {{ actividad.cupos }} | Inscritos: <strong>{{ actividad.participantes.count }}</strong>
                </div>
                <div class="btn-actions">
                    <a href="{% url 'editar_actividad' pk=actividad.pk %}" class="btn btn-warning btn-sm">
                        ‚öôÔ∏è Editar
                    </a>
                    <a href="{% url 'detalle_actividad' pk=actividad.pk %}" class="btn btn-outline-primary btn-sm">
                        Ver detalles
                    </a>
                </div>
            </div>
        </div>
        {% endfor %}
    </div>
    {% else %}
    <div class="alert alert-warning">A√∫n no has creado ninguna actividad.</div>
    {% endif %}

    <!-- Actividades en las que participo -->
    <h3 class="section-title mt-4">üèÖ Actividades en las que participo ({{ participando|length }})</h3>

    {% if participando %}
    <div class="row">
        {% for actividad in participando %}
        <div class="col-md-6">
            <div class="activity-card border-start border-4 border-success">
                <div class="activity-title">{{ actividad.titulo }}</div>
                <div class="activity-info">Organizador: <strong>{{ actividad.organizador.username }}</strong></div>
                <div class="activity-info">
                    Lugar: <strong>{{ actividad.lugar }}</strong> | Fecha: {{ actividad.fecha|date:"D d M" }} | Hora: {{ actividad.hora_inicio|time:"H:i" }}
                </div>
                <div class="btn-actions">
                    <a href="{% url 'detalle_actividad' pk=actividad.pk %}" class="btn btn-success btn-sm">
                        Ver detalles
                    </a>
                    <a href="{% url 'salir_actividad' pk=actividad.pk %}" class="btn btn-outline-danger btn-sm">
                        ‚ùå Cancelar
                    </a>
                </div>
            </div>
        </div>
        {% endfor %}
    </div>
    {% else %}
    <div class="alert alert-info">A√∫n no te has unido a ninguna actividad.</div>
    {% endif %}
</div>
{% endblock %}