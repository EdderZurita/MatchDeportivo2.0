{% extends 'base_usuario.html' %}
{% load static %}

{% block title %}Actividades | SportConnect{% endblock %}

{% block extra_css %}
<link href="{% static 'css/actividades.css' %}" rel="stylesheet">
{% endblock %}

{% block usuario_content %}
<div class="container">
  <!-- Header -->
  <div class="activities-header">
    <h2 class="fw-bold mb-1">Actividades Deportivas</h2>
    <p>Explora, √∫nete o administra tus actividades deportivas</p>
  </div>

  <!-- Botones de acci√≥n -->
  <div class="activity-actions">
    <a href="{% url 'crear_actividad' %}" class="btn btn-success">Crear actividad</a>
    <a href="{% url 'mis_actividades' %}" class="btn btn-secondary">Mis actividades</a>
  </div>

  <!-- Filtro por deporte -->
  <form method="GET" class="d-flex filter-form">
    <select name="deporte" class="form-select">
      <option value="">-- Filtrar por deporte --</option>
      <option value="futbol" {% if deporte_seleccionado=='futbol' %}selected{% endif %}>F√∫tbol</option>
      <option value="basketball" {% if deporte_seleccionado=='basketball' %}selected{% endif %}>Basketball</option>
      <option value="skate" {% if deporte_seleccionado=='skate' %}selected{% endif %}>Skate</option>
      <option value="volibol" {% if deporte_seleccionado=='volibol' %}selected{% endif %}>V√≥libol</option>
      <option value="running" {% if deporte_seleccionado=='running' %}selected{% endif %}>Running</option>
      <option value="tenis" {% if deporte_seleccionado=='tenis' %}selected{% endif %}>Tenis</option>
    </select>

    <button type="submit" class="btn btn-primary">
      Buscar
    </button>
  </form>

  <!-- Lista de actividades -->
  <div class="row mt-4">

    {% if actividades %}
    {% for actividad in actividades %}
    <div class="col-md-6">
      <div class="activity-card">
        <div class="activity-title">{{ actividad.titulo }}</div>

        {% if actividad.distancia_km %}
        <div class="activity-info">
          Distancia: <strong>{{ actividad.distancia_km }} km</strong> üìç
        </div>
        {% endif %}

        <div class="activity-info">Deporte: <strong>{{ actividad.deporte|capfirst }}</strong></div>

        <div class="activity-info">
          Lugar: <strong>{{ actividad.lugar }}</strong>
        </div>

        <div class="activity-info">
          Fecha: {{ actividad.fecha|date:"D d M" }} |
          Hora: {{ actividad.hora_inicio|time:"H:i" }}
          {% if actividad.hora_fin %}- {{ actividad.hora_fin|time:"H:i" }}{% endif %}
        </div>

        <div class="activity-info">
          Cupos disponibles: {{ actividad.cupos }} | Nivel: **{{ actividad.nivel }}**
        </div>

        <a href="{% url 'detalle_actividad' pk=actividad.pk %}" class="btn btn-primary btn-view">Ver detalles</a>
      </div>
    </div>
    {% endfor %}

    {% else %}
    <div class="col-12">
      <div class="alert alert-info" role="alert">
        No se encontraron actividades disponibles
        {% if deporte_seleccionado %} para el deporte "{{ deporte_seleccionado|capfirst }}"{% endif %}.
      </div>
    </div>
    {% endif %}

  </div>
</div>
{% endblock %}